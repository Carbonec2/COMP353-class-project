-- MySQL Script generated by MySQL Workbench
-- Fri Aug  3 18:08:38 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema ycc353_1
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema ycc353_1
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `ycc353_1` DEFAULT CHARACTER SET utf8 ;
USE `ycc353_1` ;

-- -----------------------------------------------------
-- Table `ycc353_1`.`LineOfBusiness`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ycc353_1`.`LineOfBusiness` (
  `lineOfBusinessName` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`lineOfBusinessName`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ycc353_1`.`InsurancePlan`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ycc353_1`.`InsurancePlan` (
  `name` VARCHAR(45) NOT NULL,
  `refundProrata` DECIMAL(5,2) NULL,
  PRIMARY KEY (`name`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ycc353_1`.`RoleType`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ycc353_1`.`RoleType` (
  `roleType` VARCHAR(45) NOT NULL COMMENT ' Sales associate, Manager, employee, Admin ',
  PRIMARY KEY (`roleType`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ycc353_1`.`Account`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ycc353_1`.`Account` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(45) NULL,
  `password` VARCHAR(255) NULL,
  `email` VARCHAR(45) NULL,
  `phone` VARCHAR(45) NULL,
  `firstName` VARCHAR(45) NULL,
  `middleInitial` CHAR(1) NULL,
  `lastName` VARCHAR(45) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ycc353_1`.`City`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ycc353_1`.`City` (
  `city` VARCHAR(45) NOT NULL,
  `province` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`city`, `province`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ycc353_1`.`Employee`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ycc353_1`.`Employee` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `lineOfBusinessName` VARCHAR(45) NOT NULL,
  `insurancePlanName` VARCHAR(45) NOT NULL,
  `roleType` VARCHAR(45) NOT NULL,
  `weeklyHours` DECIMAL(5,2) NULL,
  `accountId` INT NOT NULL,
  `city` VARCHAR(45) NOT NULL,
  `province` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Employee_Department1_idx` (`lineOfBusinessName` ASC),
  INDEX `fk_Employee_InsurancePlan1_idx` (`insurancePlanName` ASC),
  INDEX `fk_Employee_Role1_idx` (`roleType` ASC),
  INDEX `fk_Employee_Account1_idx` (`accountId` ASC),
  INDEX `fk_Employee_City1_idx` (`city` ASC, `province` ASC),
  CONSTRAINT `fk_Employee_Department1`
    FOREIGN KEY (`lineOfBusinessName`)
    REFERENCES `ycc353_1`.`LineOfBusiness` (`lineOfBusinessName`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Employee_InsurancePlan1`
    FOREIGN KEY (`insurancePlanName`)
    REFERENCES `ycc353_1`.`InsurancePlan` (`name`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Employee_Role1`
    FOREIGN KEY (`roleType`)
    REFERENCES `ycc353_1`.`RoleType` (`roleType`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Employee_Account1`
    FOREIGN KEY (`accountId`)
    REFERENCES `ycc353_1`.`Account` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Employee_City1`
    FOREIGN KEY (`city` , `province`)
    REFERENCES `ycc353_1`.`City` (`city` , `province`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ycc353_1`.`ContractType`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ycc353_1`.`ContractType` (
  `contractType` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`contractType`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ycc353_1`.`PlatformType`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ycc353_1`.`PlatformType` (
  `platformType` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`platformType`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ycc353_1`.`Client`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ycc353_1`.`Client` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `companyName` VARCHAR(45) NULL,
  `address` VARCHAR(45) NULL,
  `postalCode` VARCHAR(45) NULL,
  `accountId` INT NOT NULL,
  `city` VARCHAR(45) NULL,
  `province` VARCHAR(45) NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Client_Account1_idx` (`accountId` ASC),
  INDEX `fk_Client_City1_idx` (`city` ASC, `province` ASC),
  CONSTRAINT `fk_Client_Account1`
    FOREIGN KEY (`accountId`)
    REFERENCES `ycc353_1`.`Account` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Client_City1`
    FOREIGN KEY (`city` , `province`)
    REFERENCES `ycc353_1`.`City` (`city` , `province`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ycc353_1`.`Contract`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ycc353_1`.`Contract` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `contractType` VARCHAR(45) NOT NULL,
  `managerId` INT NOT NULL,
  `annualContractValue` DOUBLE NULL,
  `initialAmount` DOUBLE NULL,
  `serviceStartDate` DATE NULL,
  `serviceEndDate` DATE NULL,
  `platformType` VARCHAR(45) NOT NULL,
  `satisfactionScore` DECIMAL(5,2) NULL,
  `clientId` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Contract_ContractType_idx` (`contractType` ASC),
  INDEX `fk_Contract_Employee1_idx` (`managerId` ASC),
  INDEX `fk_Contract_ServiceType1_idx` (`platformType` ASC),
  INDEX `fk_Contract_Client1_idx` (`clientId` ASC),
  CONSTRAINT `fk_Contract_ContractType`
    FOREIGN KEY (`contractType`)
    REFERENCES `ycc353_1`.`ContractType` (`contractType`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Contract_Employee1`
    FOREIGN KEY (`managerId`)
    REFERENCES `ycc353_1`.`Employee` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Contract_ServiceType1`
    FOREIGN KEY (`platformType`)
    REFERENCES `ycc353_1`.`PlatformType` (`platformType`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Contract_Client1`
    FOREIGN KEY (`clientId`)
    REFERENCES `ycc353_1`.`Client` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ycc353_1`.`WorkChoice`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ycc353_1`.`WorkChoice` (
  `employeeId` INT NOT NULL,
  `contractType` VARCHAR(45) NOT NULL,
  `platformType` VARCHAR(45) NOT NULL,
  INDEX `fk_WorkChoice_Employee1_idx` (`employeeId` ASC),
  INDEX `fk_WorkChoice_ContractType1_idx` (`contractType` ASC),
  INDEX `fk_WorkChoice_ServiceType1_idx` (`platformType` ASC),
  PRIMARY KEY (`employeeId`, `platformType`, `contractType`),
  CONSTRAINT `fk_WorkChoice_Employee1`
    FOREIGN KEY (`employeeId`)
    REFERENCES `ycc353_1`.`Employee` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_WorkChoice_ContractType1`
    FOREIGN KEY (`contractType`)
    REFERENCES `ycc353_1`.`ContractType` (`contractType`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_WorkChoice_ServiceType1`
    FOREIGN KEY (`platformType`)
    REFERENCES `ycc353_1`.`PlatformType` (`platformType`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ycc353_1`.`SaleRecord`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ycc353_1`.`SaleRecord` (
  `contractId` INT NOT NULL,
  `employeeId` INT NOT NULL,
  `initialValue` DECIMAL(10,2) NULL,
  `annualValue` DECIMAL(10,2) NULL,
  `recordedDate` DATE NULL,
  INDEX `fk_SaleRecord_Contract1_idx` (`contractId` ASC),
  INDEX `fk_SaleRecord_Employee1_idx` (`employeeId` ASC),
  CONSTRAINT `fk_SaleRecord_Contract1`
    FOREIGN KEY (`contractId`)
    REFERENCES `ycc353_1`.`Contract` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_SaleRecord_Employee1`
    FOREIGN KEY (`employeeId`)
    REFERENCES `ycc353_1`.`Employee` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ycc353_1`.`DeliverableStandard`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ycc353_1`.`DeliverableStandard` (
  `contractType` VARCHAR(45) NOT NULL,
  `deliverable` VARCHAR(45) NOT NULL,
  `dueAfter` INT NULL,
  INDEX `fk_DeliverableStandard_ContractType1_idx` (`contractType` ASC),
  PRIMARY KEY (`contractType`, `deliverable`),
  CONSTRAINT `fk_DeliverableStandard_ContractType1`
    FOREIGN KEY (`contractType`)
    REFERENCES `ycc353_1`.`ContractType` (`contractType`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ycc353_1`.`ContractAssignment`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ycc353_1`.`ContractAssignment` (
  `contractId` INT NOT NULL,
  `employeeId` INT NOT NULL,
  `hoursWorked` DECIMAL(10,2) NULL,
  PRIMARY KEY (`contractId`, `employeeId`),
  INDEX `fk_ContractAssignment_Employee1_idx` (`employeeId` ASC),
  CONSTRAINT `fk_ContractAssignment_Contract1`
    FOREIGN KEY (`contractId`)
    REFERENCES `ycc353_1`.`Contract` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ContractAssignment_Employee1`
    FOREIGN KEY (`employeeId`)
    REFERENCES `ycc353_1`.`Employee` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ycc353_1`.`DeliverableLog`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ycc353_1`.`DeliverableLog` (
  `contractId` INT NOT NULL,
  `contractType` VARCHAR(45) NOT NULL,
  `deliverable` VARCHAR(45) NOT NULL,
  INDEX `fk_DeliverableLog_Contract1_idx` (`contractId` ASC),
  INDEX `fk_DeliverableLog_DeliverableStandard1_idx` (`contractType` ASC, `deliverable` ASC),
  CONSTRAINT `fk_DeliverableLog_Contract1`
    FOREIGN KEY (`contractId`)
    REFERENCES `ycc353_1`.`Contract` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_DeliverableLog_DeliverableStandard1`
    FOREIGN KEY (`contractType` , `deliverable`)
    REFERENCES `ycc353_1`.`DeliverableStandard` (`contractType` , `deliverable`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
